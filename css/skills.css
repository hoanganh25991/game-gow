/* css/skills.css
   Skill button & cooldown visuals, skill wheel layout, and cooldown animations.
*/

.skill{
  width: 56px;
  height: 56px;
  position: relative;
  border-radius: 10px;
  border: 1px solid var(--border-orange);
  background: linear-gradient(180deg, rgba(40,20,10,0.8), rgba(26,13,8,0.7));
  overflow: hidden;
  box-shadow: inset 0 0 0 1px var(--border-orange-subtle), 0 6px 14px rgba(0,0,0,0.4);
  pointer-events: auto;
}

/* Shared key styles for both .skill and .skill-btn */
.skill .key,
.skill-btn .key{
  position: absolute;
  left: 6px;
  top: 4px;
  font-size: 11px;
  color: var(--text-warm-light);
  opacity: 0.85;
  text-shadow: 0 1px 0 rgba(0,0,0,0.6);
}

/* Shared icon styles for both .skill and .skill-btn */
.skill .icon,
.skill-btn .icon{
  font-size: 26px;
  line-height: 1;
  pointer-events: none;
  display: block;
}

/* Shared name styles for both .skill and .skill-btn */
.skill .name,
.skill-btn .name{
  visibility: hidden;
  position: absolute;
  left: 6px;
  bottom: 6px;
  font-size: 12px;
  font-weight: 600;
  color: var(--text-warm);
  text-shadow: 0 1px 0 rgba(0,0,0,0.6);
}

/* Cooldown color theme variables */
:root {
  --cooldown-high: rgba(70, 100, 150, 0.55);    /* >50% remaining - calm blue */
  --cooldown-mid: rgba(90, 150, 220, 0.55);     /* 20-50% remaining - brighter blue */
  --cooldown-low: rgba(150, 220, 255, 0.65);    /* <20% remaining - urgent cyan */
}

/* Shared cooldown base styles */
.skill .cooldown,
.skill-btn .cooldown{
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-warm);
  font-weight: 800;
  font-size: 12px;
  background: none;
  pointer-events: none;
  text-shadow: 0 1px 0 rgba(0,0,0,0.6);
}

.skill .cooldown{
  border-radius: 10px;
  z-index: 100;
}

/* Circular cooldown visuals inside round skill buttons */
.skill-btn .cooldown{
  font-weight: 900;
  font-size: 13px;
  border-radius: 50%;
}

/* Keyframes for cooldown ready / deny feedback */
@keyframes flashPulse{
  0%   { box-shadow: 0 0 0 0 rgba(159,216,255,0.85), 0 0 10px rgba(159,216,255,0.8); }
  100% { box-shadow: 0 0 0 10px rgba(159,216,255,0), 0 0 0 rgba(159,216,255,0); }
}

.skill .cooldown.flash{
  animation: flashPulse 250ms ease-out;
  border-radius: 10px;
}

@keyframes denyPulse{
  0%   { box-shadow: 0 0 0 0 rgba(255,80,80,0.9), 0 0 10px rgba(255,80,80,0.9); }
  100% { box-shadow: 0 0 0 10px rgba(255,80,80,0), 0 0 0 rgba(255,80,80,0); }
}
@keyframes shakeX{
  0%,100% { transform: translateX(0); }
  25%     { transform: translateX(-2px); }
  75%     { transform: translateX(2px); }
}
.skill .cooldown.deny{
  animation: denyPulse 300ms ease-out, shakeX 200ms ease-in-out;
  background: conic-gradient(rgba(255,80,80,0.55) 360deg, rgba(0,0,0,0) 0deg) !important;
  color: #fff;
  border-radius: 10px;
}

/* Skill Wheel container anchored to bottom-right (mobile controls) */
#skillWheel{
  position: absolute;
  right: 12px;
  bottom: 12px;
  pointer-events: none;
}

/* Circular skill buttons */
.skill-btn{
  position: absolute;
  width: 64px;
  height: 64px;
  display: grid;
  place-items: center;
  border-radius: 50%;
  border: 1px solid var(--border-orange);
  background: linear-gradient(180deg, rgba(40,20,10,0.92), rgba(26,13,8,0.9));
  color: var(--text-warm);
  box-shadow: 0 10px 36px rgba(0,0,0,0.45);
  pointer-events: auto;
  user-select: none;
  transition: transform 140ms cubic-bezier(.2,.9,.2,1), box-shadow 120ms ease;
  will-change: transform;
  text-align: center;
  overflow: visible;
}

/* Bigger central Basic Attack button placed at the corner (acts as circle center) */
.skill-btn.center{
  right: 12px;
  bottom: 12px;
  width: 92px;
  height: 92px;
  border-radius: 50%;
  font-size: 22px;
  z-index: 5;
  box-shadow: 0 12px 44px rgba(0,0,0,0.55);
}

/* Position the four skill buttons in an arc around the basic button
   Mapping updated:
   - Q -> moved to former R position
   - R, W, E -> each shifted forward by one position around the arc (clockwise)
   - R now placed at the marked green position (slightly to the right of former W)
*/
.skill-btn.q{ right: calc((64px + 4px) * 2); bottom: 0px; }  /* former R */
.skill-btn.w{ right: calc((64px + 4px) * 2 - 12px); bottom: calc(140px - 68px); } /* former E */
.skill-btn.e{ right: calc((64px + 4px) * 1); bottom: calc(140px - 16px); }  /* adjusted down to avoid overlap with W */
.skill-btn.r{ right: 0px; bottom: 140px; }  /* new 'green' slot */
/* Make cooldown visuals circular to match buttons */
.skill-btn .cooldown{
  border-radius: 50%;
  inset: 0;
}

/* Integrate skill wheel into bottom-right flex stack.
   The wheel container becomes the positioning context for its absolute children. */
#bottomRightGroup #skillWheel{
  position: relative;   /* anchor for absolute-positioned .skill-btn children */
  right: auto;
  bottom: auto;
  width: 200px;         /* visual footprint to contain the arc */
  height: 200px;
  pointer-events: none; /* keep interaction on buttons only */
}
